# 丝芙兰(二阶段项目)
### 丝芙兰简介
丝芙兰（SEPHORA），“全球化妆品零售权威”，1969年创立于法国里摩日。SEPHORA在全球拥有超过1000家门店，途径遍布巴黎、米兰、罗马、马德里、巴塞罗那、华沙、里斯本、雅典、纽约、洛杉矶、旧金山、迈阿密、莫斯科等超过28个国家的国际化都市，丝芙兰在1997年加入全球奢侈品牌公司LVMH。SEPHORA在全球21个国家拥有1665家店铺。2005年4月，SEPHORA在上海开启了她们在中国大陆的第一家店。SEPHORA（丝芙兰）在商店内提供全面的产品选择：从护肤、美容到香水；既有久负盛名的化妆品精选品牌，还有最新亮相的市场新品如微气泡技术，更有独家专有的SEPHORA（丝芙兰中国）品牌产品。
@(功能模块划分)[首页|登录|注册|商品列表|商品详情|活动页|购物车|结算]
#### 功能概述
@(首页功能)
#####轮播图
轮播图是比较基础的功能职业,在这里的轮播图是淡入淡出效果，所以自然而然想到了定位来解决，所有的轮播图的思想都是通过控制图片的下标来实现的，所以我也是通过控制下标，顺利实现了效果。
#####  楼梯
左侧的楼梯是比较稍微有点复杂的一块，它需要一定的数学基础，因为要计算，只要就是高度，剩下的变化都是根据高度的变化而变化，所以高度的计算是十分重要的。
##### 选项卡
选项卡的操作和轮播图的原理基本上是差不多的，也是通过控制下标实现。
##### 数据加载
首页需要展示的图片是比较多的，但是又不能一步到位全部写死。这种时候就是有两种解决方案，一种是直接利用js动态生成，而另一种则是先把结构写好，再往里动态加载数据。我是利用的第二种，因为这样虽然工作量比较大，不太灵活，但是会大大降低浏览器的负载，不至于加载速度过慢而影响用户体验。
##### 模糊搜索
利用百度的接口，实现的模糊搜索
@(登录|注册)
##### 正则
这两个模块基本上差不多，主要的思想就是通过正则表达式来解决格式的验证，将通过验证的数据存储的cookie中，等待调用。
@(商品列表)
这个模块是直接展示的商品，因为数据有限，就没有多写，一共有4页，可以提供展示，也是利用的选项卡写完的，我本想是利用ajax动态加载数据，但是没时间来修改，还有就是本来有排序功能，我能给数据排序，也是由于时间原因，只给数据排序而没有将排好序的数据加载过来，有点小遗憾。
json数据排序原理（以下的res代表直接从ajax请求过来的数据）
```
var arr = res;
arr.sort( function( a, b ){
	return b.key - a.key;
} );
``` 
上面的是json对象排序的原理，很简单就是利用sort方法进行的排序。
@(商品详情)
##### 放大镜
商品详情页面中最主要的一个功能便是放大镜，方便用户查看所购买的商品，主要是用过比例计算来实现的放大镜。
##### 添加购物车
这个网站的拥有限购模式，为1~10，所以不能购买太多，我也根据这个实现了。
@(购物车|结算)
##### 查看商品
可以将购买的商品查看，利用全局路径下的cookie将所购买的商品信息保存，在购物车页面展示。
##### 删除商品
可以将所又商品删除或者删除单个商品
##### 修改商品数量
就是修改商品数量，计算重数量和总价
##### 结算
可以在结算的时候添加收货人的地址，联系方式，姓名等信息；最主要的是我在联系人那里添加了省市区的三级联动下拉列表，数据来源于国家统计局。
##### 支付成功
由于没有倒计时功能，所以我在最后的支付成功的页面，即添加了一个倒计时关闭的功能，一共5s，5s之后会自动跳转到首页，也可以手动跳转。
@(活动页)
##### 活动页
活动页是最简单的一个页面，就是简单的一个导航条的定位方式的改变。
## 页面逻辑
主要是通过cookie先验证用户是否注册，登录，登录之后在首页、活动页、商品列表页、商品详情页、购物车等页面都将显示该用户的用户名，该用户也可以直接产看自己的购物车，每个页面都可以访问到自己的购物车页面。
当点击退出按钮之后，用户的登录状态转为false，我在存取cookie的时候每次都会判断用户的登录状态是否是true，如果是true，则直接登录到达首页，并且显示购物车的状态。如果是false，则需要进行登录，并且不可以查看购物车的状态。
##### 跳转
每个页面的logo都可以跳转到index页面，有的根据语义化就可以判断，比如登录，注册，去购物车等等。所有的商品点击都会先进入商品列表页，再次选择商品则跳转到商品详情页，这里可以添加购物车和选择继续购物，之后就是购物车的操作。其中picks模块的四个商品是进入的活动页，点击任意商品将再次进入列表页，后面的操作就与上面的一样了。
### 遗憾
这次开发时间比较紧张，我还是每天加班的情况下基本算是顺利完成。但是还有很多需要完善的地方，现在要偶一个bug就是有些时候就会出现就是用户退出登录也能购买商品和查看购物车。
还有这个项目有很多细枝末节的地方需要好好琢磨琢磨，考虑时间和进度问题，等我有时间在完善。
# 总结
电商网站的开发，一般都是复杂，再复杂，前期大把的时间都花在了布局，写功能的时间和布局的时间基本是1.5:1到2:1左右，以为我总是想布局布到自认为比较完美。到布局结束之后，添加功能的时候又会发现布局需要修改，这就是一个很大的浪费时间的问题，所以我觉得平时多看看大型电商网站的布局结构是很有必要的，还有就是在利用模块化开发和前端自动化开发后，效率会比以前提升很大。再其次就是JS实现功能的构成，对自己的提升是比较大的，可以很好的了解自己需要加强的薄弱点，针对性的去提升，达到学习效率的最大化。总之，我对自己的项目是比较满意，但是还是带有一些意见，希望之后的学习中可以再接再厉！（不足之处，请大家指导！谢谢，小智哥的大力支持！）